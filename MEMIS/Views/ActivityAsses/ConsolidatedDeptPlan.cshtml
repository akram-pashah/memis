  @using MEMIS.Data;
  @using MEMIS.Enums;
@using MEMIS.ViewModels
  @model cloudscribe.Pagination.Models.PagedResult<ActivityAssess>

@{
    ViewData["Title"] = "Department Work Plan Setting";
    Layout = "~/Pages/Shared/_ContentNavbarLayout.cshtml";
    var totalAllocatedBudget = ViewBag.TotalAllocatedBudget as double?;
}

<div class="row">
    <div class="col">
        <h3>Consolidated Department Plan</h3>
    </div>
</div>
<div class="card">
    <div class="card-body">
        <div style="width:100%; overflow-x:auto;margin-top:20px;">
            <table class="table table-bordered table-striped table-hover dt-responsive nowrap">
                <thead>
                    <tr>
                        <th>Department</th>
                        <th>Strategic Intervention</th>
                        <th>Strategic Action</th>
                        <th>Activity</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].outputIndicator)</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].baseline)</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].comparativeTarget)</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].justification)</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].budgetAmount)</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].QTarget)</th>
                        <th>@Html.DisplayNameFor(model => model.Data[0].QBudget)</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Data)
                    {
                        <tr>
                            <td>
                                @if (!string.IsNullOrEmpty(item.DepartmentFk?.deptName))
                                {
                                    <span>@item.DepartmentFk?.deptName</span>
                                }
                                else
                                {
                                    <span>N/A</span>
                                }
                            <td>@Html.DisplayFor(modelItem => item.StrategicIntervention.InterventionName)</td>
                            <td>@Html.DisplayFor(modelItem => item.StrategicAction.actionName)</td>
                            <td>@Html.DisplayFor(modelItem => item.ActivityFk.activityName)</td>
                            <td>@Html.DisplayFor(modelItem => item.outputIndicator)</td>
                            <td>@Html.DisplayFor(modelItem => item.baseline)</td>
                            <td>@Html.DisplayFor(modelItem => item.comparativeTarget)</td>
                            <td>@Html.DisplayFor(modelItem => item.justification)</td>
                            <td>@Html.DisplayFor(modelItem => item.budgetAmount)</td>
                            <td>@Html.DisplayFor(modelItem => item.QTarget)</td>
                            <td>@Html.DisplayFor(modelItem => item.QBudget)</td>
                            <td>
                                    @{
                                        if (item.actType == 0)
                                        {
                                            // <a asp-action="ShowConsolidatedDeptPlan" asp-route-id="@item.intAssess" data-toggle="tooltip" data-placement="top" title="Details">
                                            //     <i class="bx bx-detail"></i>
                                            // </a>
                                        <div class="btn-group" role="group" aria-label="Actions">
                                            <a asp-action="Details" asp-route-id="@item.intAssess" class="btn btn-info" data-toggle="tooltip" data-placement="top" title="Details">
                                                <i class='bx bx-detail'></i>
                                            </a>
                                            <a asp-action="HeadVerifyStatus" asp-route-id="@item.intAssess" asp-route-IsVerified="True" class="btn btn-warning" data-toggle="tooltip" data-placement="top" title="Verify">
                                                <i class='bx bx-check'></i>
                                            </a>
                                        </div>
                                        }
                                        else if (item.actType == 1)
                                        {
                                            // <a asp-action="ShowConsolidatedRegionalAssessment" asp-route-id="@item.intAssess" data-toggle="tooltip" data-placement="top" title="Details">
                                            //     <i class="bx bx-detail"></i>
                                            // </a>
                                        <div class="btn-group" role="group" aria-label="Actions">
                                            <a asp-action="Details" asp-route-id="@item.intAssess" class="btn btn-info" data-toggle="tooltip" data-placement="top" title="Details">
                                                <i class='bx bx-detail'></i>
                                            </a>
                                            <a asp-action="HeadVerifyStatus" asp-route-id="@item.intAssess" asp-route-IsVerified="True" class="btn btn-warning" data-toggle="tooltip" data-placement="top" title="Verify">
                                                <i class='bx bx-check'></i>
                                            </a>
                                        </div>
                                        }
                                    }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            @* <table class="table table-striped table-hover dt-responsive nowrap">
            <thead>
            <tr>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].StrategicIntervention.InterventionName)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].intAction)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].intActivity)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].outputIndicator)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].baseline)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].comparativeTarget)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].justification)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].budgetAmount)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].Quarter)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].QTarget)
            </th>
            <th>
            @Html.DisplayNameFor(model => model.Data[0].QBudget)
            </th>

            <th>Is Allocated</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var item in Model.Data)
            {
            <tr>
            <td>
            @if (item.StrategicIntervention != null)
            {
            @Html.DisplayFor(modelItem => item.StrategicIntervention.InterventionName)
            }
            else
            {
            <p>N/A</p>
            }
            </td>
            <td>
            @if (item.StrategicAction != null)
            {
            @Html.DisplayFor(modelItem => item.StrategicAction.actionName)
            }
            else
            {
            <p>N/A</p>
            }
            </td>
            <td>
            @if (item.ActivityFk != null)
            {
            @Html.DisplayFor(modelItem => item.ActivityFk.activityName)
            }
            else
            {
            <p>N/A</p>
            }
            </td>

            <td>
            @Html.DisplayFor(modelItem => item.outputIndicator)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.baseline)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.comparativeTarget)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.justification)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.budgetAmount)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.Quarter)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.QTarget)
            </td>
            <td>
            @Html.DisplayFor(modelItem => item.QBudget)
            </td>
            <td>
            @if(item.actType == 1)
            {
            <span>Allocated</span>
            } else
            {
            <span>Not Allocated</span>
            }
            </td>
            </tr>
            }
            </tbody>
            </table> *@
            <div class="row">
                <div class="col">
                    <h4>Total Allocated Budget: @totalAllocatedBudget</h4>
                </div>
            </div>
        </div>
    </div>
